<script>
  
  let weatherData = () =>{
  let weatherInfo = document.querySelector("#weatherInfo");
  let url = "https://community-open-weather-map.p.rapidapi.com/weather?lat=38.54&lon=-121.74&id=2172797&units=%22metric%22+or+%22imperial%22&mode=json&q=Davis%2CUSA";
  let json="";
  let params = {
  headers:{
  "X-RapidAPI-Host":"community-open-weather-map.p.rapidapi.com",
  "X-RapidAPI-Key":"0695836580msh59f7aa3e827ccd1p151d4ejsn50792a0af711"
  },
  method: "GET" 
  }
  
  fetch(url,params)
  .then(response=>{
    //return readable stream here
    return response.json();
  }) 
  .then(data=>{
    //work with JSON data here
    weatherInfo.innerHTML = `${(data.main.temp-273.15).toFixed(1)}Â°C`;
    console.log(data);
  }) 
  .catch(error=>{
    //handle errors here
    console.log(error);
  })
}
 
  
  
let curday = function(sp){
let dateDisplay = document.querySelector("#dateDisplay");
let today = new Date();
let dd = today.getDate();
let mm = today.getMonth()+1; //As January is 0.
let yyyy = today.getFullYear();

if(dd<10) dd='0'+dd;
if(mm<10) mm='0'+mm;
 dateDisplay.innerHTML=(mm+sp+dd+sp+yyyy);
};
//console.log(curday('-'));
  
let loadWeatherWidget = ()=>{
curday('-');
weatherData();
}
</script>
